AWSTemplateFormatVersion: '2010-09-09'
Transform: AWS::Serverless-2016-10-31
Resources:
  EMCreateConfigurationChangeEvent:
    Type: AWS::Serverless::Function
    Properties:
      Handler: index.configurationChange
      Runtime: nodejs4.3
      Policies: AmazonSNSFullAccess
      CodeUri: s3://sns-test-bucket-testing/EnvironmentManagerEvents.zip
      Events:
        PutResource:
          Type: Api
          Properties:
            Path: /events/configuration-change
            Method: put
  EMCreateOperationsChangeEvent:
    Type: AWS::Serverless::Function
    Properties:
      Handler: index.operationsChange
      Runtime: nodejs4.3
      Policies: AmazonSNSFullAccess
      CodeUri: s3://sns-test-bucket-testing/EnvironmentManagerEvents.zip
      Events:
        PutResource:
          Type: Api
          Properties:
            Path: /events/operations-change
            Method: put
  EMConfigurationChange: 
    Type: "AWS::SNS::Topic"
    Properties: 
      TopicName: "EMConfigurationChange"
  EMOperationsChange:
    Type: "AWS::SNS::Topic"
    Properties: 
      TopicName: "EMOperationsChange"